extends layout

block content
	// Main content
	.container
		.columns
			.column.is-one-third
			.column.is-one-third
				h1.subtitle.has-text-centered
					strong= title

				form(method="POST" action=is_first_step ? "/users/reset" : "/users/resetfinal")

					if is_first_step
						p Please enter your username and email. If they match a user, you will be redirected to the password reset page.
						br
						.field
							label.label Username
							.control.has-icons-left.has-icons-right
								input.input(type="text" placeholder="johndoe" name="username" required=is_first_step value=(undefined === user ? "" : user.username))
								span.icon.is-small.is-left
									i.fas.fa-user
						.field
							label.label E-mail:
							.control.has-icons-left.has-icons-right
								input.input(type="email" placeholder="johndoe@john.doe" name="email" required=is_first_step value=(undefined === user ? "" : user.email))
								span.icon.is-small.is-left
									i.fas.fa-envelope
					if is_second_step
						p Almost there. Enter your new password twice and you're good to go!
						br
						div.form-group
							label(for="password") New Password:
							input#password.form-control(type="password" name="password" required=is_second_step)
						div.form-group
							label(for="cpassword") Confirm New Password:
							input#password_confirm.form-control(type="password" name="cpassword" required=is_second_step)
						input(type="hidden" name="userid" value=user._id)
					br
					button.button.is-link(type="submit") #{is_first_step ? "Next" : "Done"}

				br
				if errors
					ul
						for error in errors
							li.has-text-danger!= error.msg
			.column.is-one-third